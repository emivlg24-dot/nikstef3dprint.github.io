<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NikStef CyberLab | Premium Fabrication</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent: #0066ff;
            --bg: #ffffff;
            --dark: #0a0a0a;
            --gray: #f5f5f7;
            --border: #e1e1e1;
            --text: #1d1d1f;
            --admin-panel: #f0f7ff;
            --star: #ffc107;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; scroll-behavior: smooth; }

        header { 
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px);
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border);
        }
        .logo { font-weight: 700; font-size: 1.5rem; letter-spacing: -1px; color: var(--dark); cursor: pointer; text-decoration: none; }
        .logo span { color: var(--accent); }

        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-links a { text-decoration: none; color: var(--text); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: 0.3s; }
        .nav-links a:hover { color: var(--accent); }

        .cart-trigger { 
            position: relative; cursor: pointer; background: var(--dark); color: white;
            padding: 8px 18px; border-radius: 50px; font-size: 0.9rem; transition: 0.3s;
        }
        #cart-count { background: var(--accent); padding: 2px 6px; border-radius: 50%; font-size: 0.7rem; margin-left: 5px; }

        #admin-bar { background: var(--admin-panel); padding: 25px 5%; display: none; border-bottom: 2px solid var(--accent); animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { opacity:0; transform: translateY(-10px); } to { opacity:1; transform: translateY(0); } }
        .admin-flex { display: flex; gap: 10px; flex-wrap: wrap; max-width: 1200px; margin: auto; }
        .admin-input, .admin-select { padding: 12px; border: 1px solid #ddd; border-radius: 10px; flex: 1; min-width: 150px; font-family: inherit; }
        .deploy-btn { background: #28a745; color: white; border: none; padding: 12px 25px; border-radius: 10px; font-weight: 700; cursor: pointer; }

        .export-section { width: 100%; margin-top: 20px; padding: 15px; background: white; border: 1px solid #0066ff; border-radius: 12px; }
        .export-section p { font-size: 0.8rem; font-weight: 700; color: #0066ff; margin-bottom: 10px; }
        .code-display { background: #f5f5f7; padding: 10px; border-radius: 8px; font-family: monospace; font-size: 0.7rem; overflow-x: auto; white-space: nowrap; margin-bottom: 10px; border: 1px solid #ddd; }

        .controls-row { padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; background: #fff; border-bottom: 1px solid var(--border); }
        .search-box { position: relative; width: 300px; }
        .search-box input { width: 100%; padding: 10px 40px 10px 15px; border-radius: 20px; border: 1px solid var(--border); font-family: inherit; }

        .container { max-width: 1400px; margin: 0 auto; padding: 0 5%; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin-bottom: 60px; }
        .section-title { padding: 40px 5% 20px; font-size: 1.8rem; font-weight: 700; border-bottom: 2px solid var(--gray); margin-bottom: 30px; }
        .section-title span { color: var(--accent); }
        
        .card { background: white; border: 1px solid var(--border); border-radius: 24px; padding: 20px; transition: 0.4s; position: relative; display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.06); border-color: var(--accent); }

        .gallery-container { width: 100%; height: 250px; position: relative; overflow: hidden; border-radius: 16px; margin-bottom: 15px; background: #f9f9f9; }
        .gallery-slider { display: flex; transition: transform 0.4s ease; height: 100%; width: 100%; }
        .gallery-slider img { width: 100%; height: 100%; object-fit: contain; flex-shrink: 0; }
        .gal-nav { position: absolute; top: 50%; transform: translateY(-50%); background: white; border: 1px solid #ddd; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; z-index: 5; }
        .gal-prev { left: 8px; } .gal-next { right: 8px; }

        .price-tag { font-size: 1.4rem; font-weight: 700; margin: 12px 0; }
        .add-btn { width: 100%; padding: 14px; border: none; border-radius: 12px; background: var(--dark); color: white; font-weight: 600; cursor: pointer; transition: 0.3s; margin-top: auto; }

        .admin-btns { position: absolute; top: 15px; right: 15px; display: none; gap: 5px; z-index: 10; }
        .edit-tool { background: var(--accent); color: white; border: none; padding: 6px 12px; border-radius: 8px; cursor: pointer; font-size: 0.7rem; }
        .del-tool { background: #ff3b30; color: white; border: none; padding: 6px 12px; border-radius: 8px; cursor: pointer; font-size: 0.7rem; }

        .reviews-section { background: var(--gray); padding: 80px 5%; margin-top: 40px; }
        .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; max-width: 1400px; margin: auto; }
        .review-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .stars { color: var(--star); margin-bottom: 15px; }

        #cart-sidebar { position: fixed; right: -100%; top: 0; width: 450px; height: 100%; background: white; box-shadow: -10px 0 30px rgba(0,0,0,0.1); z-index: 2000; padding: 30px; transition: 0.5s; overflow-y: auto; }
        #cart-sidebar.active { right: 0; }
        .cart-item { padding: 12px 0; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;}
        
        .pricing-summary { margin-top: 20px; border-top: 2px solid var(--gray); padding-top: 15px; }
        .price-line { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.95rem; }
        .price-line.grand-total { font-size: 1.3rem; font-weight: 800; margin-top: 10px; color: var(--accent); border-top: 1px dashed #ccc; padding-top: 10px; }

        .checkout-form { margin-top: 25px; }
        .form-group { margin-bottom: 12px; }
        .form-group label { display: block; font-size: 0.8rem; font-weight: 600; margin-bottom: 4px; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; font-family: inherit; font-size: 0.9rem; }

        .bank-details-box { background: #f0f7ff; border: 1px solid #cce4ff; padding: 15px; border-radius: 10px; margin-bottom: 15px; }
        .checkout-btn { width: 100%; padding: 18px; background: #25D366; color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; margin-top: 15px; }

        footer { background: var(--dark); color: white; padding: 60px 5%; margin-top: 80px; }
        @media (max-width: 500px) { #cart-sidebar { width: 100%; } }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="toggleAdmin()">NikStef<span>.Lab</span></div>
    <nav class="nav-links">
        <a onclick="setCategory('Standard')">SHOP</a>
        <a onclick="setCategory('Custom')">CUSTOM FABRICATION</a>
        <a href="#reviews">REVIEWS</a>
        <div class="cart-trigger" onclick="toggleCart()">CART <span id="cart-count">0</span></div>
    </nav>
</header>

<section id="admin-bar">
    <div class="admin-flex">
        <input type="hidden" id="edit-id" value="-1">
        <input type="text" id="p-name" class="admin-input" placeholder="Name">
        <input type="number" id="p-price" class="admin-input" placeholder="Price £">
        <select id="p-category" class="admin-select">
            <option value="Standard">Ready Product</option>
            <option value="3D Printing">Custom 3D Print</option>
            <option value="Apparel">Custom Apparel</option>
        </select>
        <input type="text" id="p-img" class="admin-input" placeholder="Img links (comma separated)">
        <input type="text" id="p-desc" class="admin-input" placeholder="Desc">
        <button class="deploy-btn" id="save-btn" onclick="saveProduct()">SAVE</button>
        <button onclick="resetAdmin()" style="border:none; background:#666; color:white; padding:10px; border-radius:10px; cursor:pointer">X</button>
    </div>

    <div class="export-section">
        <p><i class="fas fa-database"></i> DIGITAL DATABASE BACKUP</p>
        <div class="code-display" id="db-code">Loading database...</div>
        <button class="deploy-btn" style="background:var(--accent);" onclick="copyDB()">COPY DATABASE CODE</button>
        <small style="display:block; margin-top:5px; color:#666;">Paste this code into your HTML file to sync all devices.</small>
    </div>
</section>

<div class="controls-row">
    <h2 id="view-title" style="font-weight: 700; font-size: 1.2rem;">Ready to Buy</h2>
    <div class="search-box"><input type="text" id="searchInput" onkeyup="searchProducts()" placeholder="Find a product..."><i class="fas fa-search" style="position:absolute; right:15px; top:12px; color:#aaa;"></i></div>
</div>

<div class="container"><div id="shop-sections"></div></div>

<section class="reviews-section" id="reviews">
    <h2 class="section-title" style="border:none; padding:0; text-align:center; margin-bottom:50px;">Customer <span>Feedback</span></h2>
    <div class="reviews-grid">
        <div class="review-card">
            <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
            <p>"Amazing quality on the 3D parts. Best custom service in Bradford."</p>
            <div class="review-author">— Engineering Client</div>
        </div>
        <div class="review-card">
            <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
            <p>"Branded apparel looks perfect. Fast delivery."</p>
            <div class="review-author">— Studio Barber</div>
        </div>
    </div>
</section>

<div id="cart-sidebar">
    <h2 style="display: flex; justify-content: space-between;">Manifest <i class="fas fa-times" onclick="toggleCart()" style="cursor: pointer;"></i></h2>
    <div id="cart-items-list" style="margin-top: 15px;"></div>
    
    <div class="pricing-summary">
        <div class="price-line"><span>Net Subtotal:</span> <span>£<span id="sub-val">0.00</span></span></div>
        <div class="price-line"><span>VAT (20%):</span> <span>£<span id="vat-val">0.00</span></span></div>
        <div class="price-line"><span>Delivery:</span> <span>£<span id="del-val">0.00</span></span></div>
        <div class="price-line grand-total"><span>Total:</span> <span>£<span id="grand-val">0.00</span></span></div>
    </div>

    <div class="checkout-form">
        <div class="form-group">
            <label>Payment Method</label>
            <select id="payment-method" onchange="toggleBankDetails()">
                <option value="Bank Transfer">Direct Bank Transfer</option>
                <option value="Cash">Cash on Collection (Bradford)</option>
            </select>
        </div>
        <div id="bank-box" class="bank-details-box">
            <p><strong>Bank:</strong> MONZO | <strong>Acc:</strong> 11254040 | <strong>Sort:</strong> 04-00-04</p>
        </div>
        <div class="form-group"><label>Name</label><input type="text" id="cust-name"></div>
        <div class="form-group"><label>Email</label><input type="email" id="cust-email"></div>
        <div class="form-group"><label>Address</label><textarea id="cust-address" rows="2"></textarea></div>
        <div class="form-group"><label>Phone</label><input type="text" id="cust-phone"></div>
        <button class="checkout-btn" onclick="checkout()"><i class="fab fa-whatsapp"></i> PLACE ORDER VIA WHATSAPP</button>
    </div>
</div>

<footer>
    <div style="text-align:center;"><h4>NikStef Lab | Bradford, UK</h4></div>
</footer>

<script>
    // --- MASTER DATABASE ---
    let products = JSON.parse(localStorage.getItem('nikstef_v8_db')) || [
        {"name":"Kit Spinning Reel For ULTEGRA SPOD XTD","price":20,"category":"Standard","imgs":"https://i.postimg.cc/1XD1BHFN/Whats-App-Image-2026-01-04-at-17-12-34.jpg,https://i.postimg.cc/kGWPscSb/Whats-App-Image-2026-01-04-at-17-12-35.jpg,https://i.postimg.cc/hvVRsrmh/Whats-App-Image-2026-01-04-at-17-12-35-(1).jpg,https://i.postimg.cc/8cLg4HvP/Whats-App-Image-2026-01-04-at-17-12-35-(2).jpg,https://i.postimg.cc/90yHbp90/Whats-App-Image-2026-01-04-at-17-12-35-(3).jpg,https://i.postimg.cc/3N2Q1BGR/Whats-App-Image-2026-01-04-at-17-12-35-(4).jpg,https://i.postimg.cc/1tkZDT8n/Whats-App-Image-2026-01-04-at-17-12-36.jpg","desc":"Additional Features: Easy installation and universal compatibility with MV Spools reels. Superior wear resistance thanks to Teflon, extending the life of your equipment. Protects the shaft from dust, sand, salt, and other corrosive elements. Prevents annoying tangles on the shaft and reel body, ensuring optimal performance. Visually appealing and of innovative design, it complements the aesthetics of your fishing gear."},{"name":"BMW M2 3D Print Wall ART","price":20,"category":"Standard","imgs":"https://i.postimg.cc/tJL6FXb0/Whats-App-Image-2026-01-04-at-18-00-46.jpg","desc":"3D Printed BMW M2 Silhouette – Geometric Car Decor Elevate your space with this custom-designed BMW M2 wall art. This piece celebrates the G87 chassis, highlighting its muscular wheel arches and signature quad-exhaust look through a stylized, artistic lens. Product Specifications: Dimensions: 19.3cm (H) x 15.2cm (W) Thickness: 3mm Material: Durable, lightweight 3D-printed polymer Design: Integrated \"BMW M2\" vertical branding Mounting: Lightweight enough for damage-free hanging (e.g., Command strips or blue tack)."}
    ];

    let cart = [];
    let adminMode = false;
    let viewMode = 'Standard';
    let sliderPositions = {};

    function renderShop(filterTerm = '') {
        const container = document.getElementById('shop-sections');
        container.innerHTML = '';
        let categoriesToShow = viewMode === 'Standard' ? ['Standard'] : ['3D Printing', 'Apparel'];
        
        categoriesToShow.forEach(cat => {
            let catProducts = products.filter(p => p.category === cat);
            if(filterTerm) catProducts = catProducts.filter(p => p.name.toLowerCase().includes(filterTerm.toLowerCase()));
            
            if(catProducts.length > 0) {
                const section = document.createElement('div');
                section.innerHTML = `<h2 class="section-title">${cat === 'Standard' ? 'Shop' : 'Custom <span>' + cat + '</span>'}</h2>`;
                const grid = document.createElement('div'); grid.className = 'grid';

                catProducts.forEach(p => {
                    const realIndex = products.indexOf(p);
                    const imgList = p.imgs.split(',').map(s => s.trim());
                    grid.innerHTML += `
                        <div class="card">
                            <div class="admin-btns" style="display:${adminMode ? 'flex' : 'none'}">
                                <button class="edit-tool" onclick="prepareEdit(${realIndex})">EDIT</button>
                                <button class="del-tool" onclick="deleteProduct(${realIndex})">DEL</button>
                            </div>
                            <div class="gallery-container">
                                <div class="gallery-slider" id="slider-${realIndex}">
                                    ${imgList.map(src => `<img src="${src}">`).join('')}
                                </div>
                                ${imgList.length > 1 ? `<button class="gal-nav gal-prev" onclick="moveSlide(${realIndex}, -1)">❮</button><button class="gal-nav gal-next" onclick="moveSlide(${realIndex}, 1)">❯</button>` : ''}
                            </div>
                            <h3>${p.name}</h3>
                            <p>${p.desc}</p>
                            <div class="price-tag">£${parseFloat(p.price).toFixed(2)}</div>
                            <button class="add-btn" onclick="addToCart(${realIndex})">Add to Manifest</button>
                        </div>`;
                });
                section.appendChild(grid);
                container.appendChild(section);
            }
        });
        updateDBDisplay();
    }

    function toggleBankDetails() {
        const method = document.getElementById('payment-method').value;
        document.getElementById('bank-box').style.display = method === 'Bank Transfer' ? 'block' : 'none';
        updateCartDisplay();
    }

    function updateCartDisplay() {
        const list = document.getElementById('cart-items-list');
        list.innerHTML = ''; let subtotal = 0;
        cart.forEach((item, idx) => {
            subtotal += item.price;
            list.innerHTML += `<div class="cart-item"><span>${item.name}</span><b>£${item.price.toFixed(2)} <i class="fas fa-trash" onclick="removeFromCart(${idx})" style="color:red; cursor:pointer; margin-left:10px;"></i></b></div>`;
        });
        const vat = subtotal * 0.20;
        const delivery = (document.getElementById('payment-method').value === 'Cash' || cart.length === 0) ? 0 : 5.00;
        
        document.getElementById('sub-val').innerText = subtotal.toFixed(2);
        document.getElementById('vat-val').innerText = vat.toFixed(2);
        document.getElementById('del-val').innerText = delivery.toFixed(2);
        document.getElementById('grand-val').innerText = (subtotal + vat + delivery).toFixed(2);
        document.getElementById('cart-count').innerText = cart.length;
    }

    function addToCart(idx) {
        cart.push(products[idx]);
        updateCartDisplay();
    }

    function removeFromCart(idx) {
        cart.splice(idx, 1);
        updateCartDisplay();
    }

    function moveSlide(idx, dir) {
        if (!sliderPositions[idx]) sliderPositions[idx] = 0;
        const slider = document.getElementById(`slider-${idx}`);
        const count = slider.children.length;
        sliderPositions[idx] = (sliderPositions[idx] + dir + count) % count;
        slider.style.transform = `translateX(-${sliderPositions[idx] * 100}%)`;
    }

    function checkout() {
        if (!cart.length) return alert("Cart is empty");
        const name = document.getElementById('cust-name').value;
        const email = document.getElementById('cust-email').value;
        const phone = document.getElementById('cust-phone').value;
        const pay = document.getElementById('payment-method').value;
        if (!name || !email || !phone) return alert("Please fill all contact details");

        const items = cart.map(i => `• ${i.name}`).join('%0A');
        const grand = document.getElementById('grand-val').innerText;
        const msg = `*NEW ORDER - NIKSTEF LAB*%0AClient: ${name}%0AEmail: ${email}%0APayment: ${pay}%0AItems:%0A${items}%0ATotal: £${grand}`;
        window.open(`https://wa.me/447305378435?text=${msg}`, '_blank');
        cart = []; updateCartDisplay(); toggleCart();
    }

    function toggleAdmin() { if(prompt("Key:") === "NikS123") { adminMode = !adminMode; document.getElementById('admin-bar').style.display = adminMode ? 'block' : 'none'; renderShop(); } }
    
    function resetAdmin() { 
        document.getElementById('edit-id').value = "-1"; 
        document.querySelectorAll('.admin-input').forEach(i => i.value = ""); 
        document.getElementById('save-btn').innerText = "SAVE";
    }

    function saveProduct() { 
        const id = parseInt(document.getElementById('edit-id').value);
        const name = document.getElementById('p-name').value;
        const price = parseFloat(document.getElementById('p-price').value);
        const cat = document.getElementById('p-category').value;
        const img = document.getElementById('p-img').value;
        const desc = document.getElementById('p-desc').value;
        if(!name || isNaN(price)) return alert("Enter valid Name and Price");

        if(id === -1) products.push({name, price, category: cat, imgs: img, desc});
        else products[id] = {name, price, category: cat, imgs: img, desc};
        
        localStorage.setItem('nikstef_v8_db', JSON.stringify(products));
        resetAdmin(); renderShop();
    }

    function prepareEdit(idx) {
        const p = products[idx];
        document.getElementById('edit-id').value = idx;
        document.getElementById('p-name').value = p.name;
        document.getElementById('p-price').value = p.price;
        document.getElementById('p-category').value = p.category;
        document.getElementById('p-img').value = p.imgs;
        document.getElementById('p-desc').value = p.desc;
        document.getElementById('save-btn').innerText = "UPDATE";
        window.scrollTo(0,0);
    }

    function deleteProduct(idx) { if(confirm("Delete product?")) { products.splice(idx, 1); localStorage.setItem('nikstef_v8_db', JSON.stringify(products)); renderShop(); } }
    function toggleCart() { document.getElementById('cart-sidebar').classList.toggle('active'); }
    function updateDBDisplay() { document.getElementById('db-code').innerText = JSON.stringify(products); }
    function copyDB() { navigator.clipboard.writeText(document.getElementById('db-code').innerText); alert("Code copied!"); }
    function setCategory(cat) { 
        viewMode = cat; 
        document.getElementById('view-title').innerText = cat === 'Standard' ? 'Ready to Buy' : 'Custom Fabrication';
        renderShop(); 
    }
    function searchProducts() { renderShop(document.getElementById('searchInput').value); }
    
    renderShop();
</script>
</body>
</html>
